# üéâ –°–ø—Ä–∏–Ω—Ç D0 - –ó–ê–í–ï–†–®–ï–ù

**–î–∞—Ç–∞:** 18 –æ–∫—Ç—è–±—Ä—è 2025
**–°—Ç–∞—Ç—É—Å:** ‚úÖ Completed
**–ü—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** ~2 —á–∞—Å–∞

## üìã –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤

–°–æ–∑–¥–∞–Ω—ã –ø—Ä–æ—Å—Ç—ã–µ single-stage Dockerfiles –¥–ª—è –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:

```
devops/
‚îú‚îÄ‚îÄ Dockerfile.bot       ‚úÖ Python 3.11 + UV
‚îú‚îÄ‚îÄ Dockerfile.api       ‚úÖ Python 3.11 + UV
‚îî‚îÄ‚îÄ Dockerfile.frontend  ‚úÖ Node.js 20 + pnpm
```

**–ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- Single-stage builds (MVP –ø–æ–¥—Ö–æ–¥)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ CMD
- –ú–∏–Ω–∏–º–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –æ–±—Ä–∞–∑—ã –Ω–∞ –±–∞–∑–µ slim

### 2. –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —á–µ—Ä–µ–∑ Docker Compose

–°–æ–∑–¥–∞–Ω `docker-compose.yml` –¥–ª—è 3 —Å–µ—Ä–≤–∏—Å–æ–≤:

```yaml
services:
  bot       # Telegram –±–æ—Ç
  api       # FastAPI —Å–µ—Ä–≤–µ—Ä (–ø–æ—Ä—Ç 8000)
  frontend  # Next.js –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–ø–æ—Ä—Ç 3000)
```

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- –û–±—â–∏–π volume –¥–ª—è SQLite (./data)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–µ—Ç—å –º–µ–∂–¥—É —Å–µ—Ä–≤–∏—Å–∞–º–∏
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–æ—Ç–∞—Ü–∏–µ–π
- Restart policies

### 3. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏

–°–æ–∑–¥–∞–Ω—ã `.dockerignore` —Ñ–∞–π–ª—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞:

```
devops/
‚îú‚îÄ‚îÄ .dockerignore.bot       ‚úÖ Python-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
‚îú‚îÄ‚îÄ .dockerignore.api       ‚úÖ + –±–µ–∑ prompts/
‚îî‚îÄ‚îÄ .dockerignore.frontend  ‚úÖ Node.js-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è
```

**–ò—Å–∫–ª—é—á–µ–Ω—ã:**
- –ö–µ—à–∏ (`__pycache__`, `.next`, `node_modules`)
- –¢–µ—Å—Ç—ã –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- IDE –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –õ–æ–≥–∏ –∏ –¥–∞–Ω–Ω—ã–µ

### 4. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–°–æ–∑–¥–∞–Ω `.env.example` —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤—Å–µ—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:

```ini
TELEGRAM_BOT_TOKEN=...
OPENROUTER_API_KEY=...
OPENROUTER_MODEL=...
DATABASE_URL=sqlite+aiosqlite:///data/messages.db
LOG_LEVEL=INFO
```

### 5. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

#### README.md

–î–æ–±–∞–≤–ª–µ–Ω —Ä–∞–∑–¥–µ–ª **"üê≥ Docker Setup"** —Å:
- –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ –∫ —Å–∏—Å—Ç–µ–º–µ
- –ü–æ—à–∞–≥–æ–≤—ã–º–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏
- –ö–æ–º–∞–Ω–¥–∞–º–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- Troubleshooting (4 –ø—Ä–æ–±–ª–µ–º—ã)

#### DevOps –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- `devops-roadmap.md` - –æ–±–Ω–æ–≤–ª–µ–Ω —Å—Ç–∞—Ç—É—Å D0
- `plans/d0-basic-docker-setup.md` - –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω
- `sprint-d0-completion.md` - –æ—Ç—á–µ—Ç –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –°—Ç–∞—Ç—É—Å |
|----------|--------|
| `docker-compose up` –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã | ‚úÖ |
| Bot –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ SQLite | ‚úÖ |
| API –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ :8000 | ‚úÖ |
| Frontend –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ :3000 | ‚úÖ |
| Frontend ‚Üí API –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ | ‚úÖ |
| –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ | ‚úÖ |
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≤ README | ‚úÖ |
| Roadmap –æ–±–Ω–æ–≤–ª–µ–Ω | ‚úÖ |

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞

```bash
# –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
docker-compose up

# –° –ø–µ—Ä–µ—Å–±–æ—Ä–∫–æ–π
docker-compose up --build

# –í —Ñ–æ–Ω–µ
docker-compose up -d

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down
```

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
systech-aidd-test/
‚îú‚îÄ‚îÄ devops/
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile.bot           # ‚úÖ Bot –æ–±—Ä–∞–∑
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile.api           # ‚úÖ API –æ–±—Ä–∞–∑
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile.frontend      # ‚úÖ Frontend –æ–±—Ä–∞–∑
‚îÇ   ‚îú‚îÄ‚îÄ .dockerignore.bot        # ‚úÖ –ò—Å–∫–ª—é—á–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ .dockerignore.api        # ‚úÖ –ò—Å–∫–ª—é—á–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ .dockerignore.frontend   # ‚úÖ –ò—Å–∫–ª—é—á–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ doc/
‚îÇ       ‚îú‚îÄ‚îÄ devops-roadmap.md    # ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω
‚îÇ       ‚îú‚îÄ‚îÄ plans/
‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ d0-basic-docker-setup.md
‚îÇ       ‚îî‚îÄ‚îÄ sprint-d0-completion.md
‚îÇ
‚îú‚îÄ‚îÄ docker-compose.yml           # ‚úÖ –°–æ–∑–¥–∞–Ω
‚îú‚îÄ‚îÄ .env.example                 # ‚úÖ –°–æ–∑–¥–∞–Ω
‚îî‚îÄ‚îÄ README.md                    # ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω
```

## üí° MVP –ø–æ–¥—Ö–æ–¥

### –ß—Ç–æ —Å–¥–µ–ª–∞–ª–∏ –ø—Ä–æ—Å—Ç–æ

- ‚úÖ Single-stage Dockerfiles (–±–µ–∑ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π)
- ‚úÖ Development —Ä–µ–∂–∏–º –¥–ª—è Frontend
- ‚úÖ SQLite –≤ shared volume
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –≤ CMD (–±–µ–∑ entrypoint)

### –ß—Ç–æ –æ—Ç–ª–æ–∂–∏–ª–∏ –Ω–∞ –ø–æ—Ç–æ–º

- ‚è≥ Multi-stage builds (–°–ø—Ä–∏–Ω—Ç D1+)
- ‚è≥ Production build Frontend
- ‚è≥ PostgreSQL –≤–º–µ—Å—Ç–æ SQLite
- ‚è≥ Health checks
- ‚è≥ Security scanning

## üöÄ –°–ª–µ–¥—É—é—â–∏–π —Å–ø—Ä–∏–Ω—Ç

**–°–ø—Ä–∏–Ω—Ç D1: Build & Publish**

–ó–∞–¥–∞—á–∏:
- GitHub Actions –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–±–æ—Ä–∫–∏
- –ü—É–±–ª–∏–∫–∞—Ü–∏—è –æ–±—Ä–∞–∑–æ–≤ –≤ GitHub Container Registry (GHCR)
- –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (latest, sha-*)
- CI/CD badges

**–ü–ª–∞–Ω:** [devops/doc/plans/d1-build-publish.md](doc/plans/d1-build-publish.md) (–±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω)

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

- [DevOps Roadmap](doc/devops-roadmap.md) - –û–±—â–∏–π roadmap
- [–ü–ª–∞–Ω D0](doc/plans/d0-basic-docker-setup.md) - –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω —Å–ø—Ä–∏–Ω—Ç–∞
- [Completion Report](doc/sprint-d0-completion.md) - –ü–æ–ª–Ω—ã–π –æ—Ç—á–µ—Ç
- [README.md](../README.md) - –ì–ª–∞–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## üéì –£—Ä–æ–∫–∏

### –ß—Ç–æ —Å—Ä–∞–±–æ—Ç–∞–ª–æ

1. **MVP –ø–æ–¥—Ö–æ–¥** - —Ñ–æ–∫—É—Å –Ω–∞ –ø—Ä–æ—Å—Ç–æ—Ç–µ –ø–æ–∑–≤–æ–ª–∏–ª –∑–∞–≤–µ—Ä—à–∏—Ç—å –∑–∞ 2 —á–∞—Å–∞
2. **SQLite** - —É–ø—Ä–æ—Å—Ç–∏–ª –Ω–∞—á–∞–ª–æ, –Ω–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –ë–î
3. **Shared volume** - –ø—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –æ–±—â–µ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º
4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å—Ä–∞–∑—É** - README –æ–±–Ω–æ–≤–ª–µ–Ω –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π

### –ß—Ç–æ —É—á–µ—Å—Ç—å

1. **Frontend –≤ dev —Ä–µ–∂–∏–º–µ** - –¥–ª—è production –Ω—É–∂–µ–Ω build
2. **SQLite –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è** - –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≤—ã—Å–æ–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫
3. **–ú–∏–≥—Ä–∞—Ü–∏–∏ –∫–∞–∂–¥—ã–π —Ä–∞–∑** - –º–æ–∂–Ω–æ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å —É—Å–ª–æ–≤–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π
4. **–†–∞–∑–º–µ—Ä –æ–±—Ä–∞–∑–æ–≤** - –º–æ–∂–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å —Å multi-stage

---

**‚úÖ –°–ø—Ä–∏–Ω—Ç D0 —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω!**

–¢–µ–ø–µ—Ä—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π `docker-compose up` üéâ
