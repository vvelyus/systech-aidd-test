# –°–ø—Ä–∏–Ω—Ç D0 - –û—Ç—á–µ—Ç –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏

**–î–∞—Ç–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è:** 18 –æ–∫—Ç—è–±—Ä—è 2025
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω
**–ü–ª–∞–Ω:** [.cursor/plans/sprint-d0-docker-setup-f93d9498.plan.md](../../.cursor/plans/sprint-d0-docker-setup-f93d9498.plan.md)

## –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### Dockerfiles (Single-stage, MVP)

- ‚úÖ `devops/Dockerfile.bot` - Python 3.11 + UV –¥–ª—è Telegram –±–æ—Ç–∞
- ‚úÖ `devops/Dockerfile.api` - Python 3.11 + UV –¥–ª—è FastAPI
- ‚úÖ `devops/Dockerfile.frontend` - Node.js 20 + pnpm –¥–ª—è Next.js

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- Single-stage –æ–±—Ä–∞–∑—ã (–±–µ–∑ multi-stage –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –≤ CMD
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Å–±–æ—Ä–∫–∏

### Docker Compose

- ‚úÖ `docker-compose.yml` - –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è 3 —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ –û–±—â–∏–π volume `./data` –¥–ª—è SQLite –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü—Ä–æ–±—Ä–æ—Å –ø–æ—Ä—Ç–æ–≤: 8000 (API), 3000 (Frontend)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (json-file, rotation)

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- ‚úÖ `.env.example` –æ–±–Ω–æ–≤–ª–µ–Ω —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–ª—è Docker
- ‚úÖ –û–±—â–∞—è —Å–µ—Ç—å `systech-network` –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ Volume mounting –¥–ª—è –¥–∞–Ω–Ω—ã—Ö, –ª–æ–≥–æ–≤ –∏ –ø—Ä–æ–º–ø—Ç–æ–≤
- ‚úÖ Restart policy: `unless-stopped`

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- ‚úÖ README.md –æ–±–Ω–æ–≤–ª–µ–Ω —Å —Å–µ–∫—Ü–∏–µ–π "üê≥ Docker Setup"
- ‚úÖ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∑–∞–ø—É—Å–∫—É —á–µ—Ä–µ–∑ Docker
- ‚úÖ Troubleshooting —Å–µ–∫—Ü–∏—è –¥–ª—è —á–∞—Å—Ç—ã—Ö –ø—Ä–æ–±–ª–µ–º
- ‚úÖ –ö–æ–º–∞–Ω–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

**–î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç:** [DOCKER_TESTING_REPORT.md](../../DOCKER_TESTING_REPORT.md)

### –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ (–≤—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã)

- ‚úÖ –ö–æ–º–∞–Ω–¥–∞ `docker-compose up` –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
- ‚úÖ Bot –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ SQLite –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- ‚úÖ API –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:8000
- ‚úÖ Frontend –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://localhost:3000
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–µ—Ç—Å—è –≤ `./data/messages.db`

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–∏–≥—Ä–∞—Ü–∏–π Alembic** - –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ head —Ä–µ–≤–∏–∑–∏–∏
   - –£–¥–∞–ª–µ–Ω –¥—É–±–ª–∏—Ä—É—é—â–∏–π—Å—è —Ñ–∞–π–ª –º–∏–≥—Ä–∞—Ü–∏–∏
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ü–µ–ø–æ—á–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∏–º–µ–Ω–∞ –ø–æ–ª–µ–π –≤ –∏–Ω–¥–µ–∫—Å–∞—Ö

2. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç –ø–æ—Ä—Ç–æ–≤** - –ø–æ—Ä—Ç 3000 –±—ã–ª –∑–∞–Ω—è—Ç
   - –û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ª–æ–∫–∞–ª—å–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å

3. **–£—Å—Ç–∞—Ä–µ–≤—à–∏–π –∞—Ç—Ä–∏–±—É—Ç** - `version` –≤ docker-compose.yml
   - –£–¥–∞–ª–µ–Ω –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å –Ω–æ–≤—ã–º–∏ –≤–µ—Ä—Å–∏—è–º–∏

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏—Ç–æ–≥–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤

```
systech-aidd-test/
‚îú‚îÄ‚îÄ devops/
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile.bot
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile.api
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile.frontend
‚îÇ   ‚îî‚îÄ‚îÄ doc/
‚îÇ       ‚îú‚îÄ‚îÄ devops-roadmap.md (–æ–±–Ω–æ–≤–ª–µ–Ω)
‚îÇ       ‚îî‚îÄ‚îÄ sprint-d0-completion.md (—ç—Ç–æ—Ç —Ñ–∞–π–ª)
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ .env.example (–æ–±–Ω–æ–≤–ª–µ–Ω)
‚îú‚îÄ‚îÄ README.md (–æ–±–Ω–æ–≤–ª–µ–Ω —Å Docker –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º–∏)
‚îú‚îÄ‚îÄ DOCKER_TESTING_REPORT.md (–¥–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç)
‚îî‚îÄ‚îÄ data/
    ‚îî‚îÄ‚îÄ messages.db (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
```

## MVP –ø–æ–¥—Ö–æ–¥

–°–ø—Ä–∏–Ω—Ç D0 —Å–ª–µ–¥–æ–≤–∞–ª MVP –ø–æ–¥—Ö–æ–¥—É —Å —Ñ–æ–∫—É—Å–æ–º –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å –∏ –ø—Ä–æ—Å—Ç–æ—Ç—É:

- ‚úÖ **Single-stage Dockerfiles** - –±–µ–∑ multi-stage –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π
- ‚úÖ **Development —Ä–µ–∂–∏–º** - Frontend –≤ dev —Ä–µ–∂–∏–º–µ (`pnpm dev`)
- ‚úÖ **SQLite** - –ø—Ä–æ—Å—Ç–∞—è —Ñ–∞–π–ª–æ–≤–∞—è –ë–î –≤–º–µ—Å—Ç–æ PostgreSQL
- ‚úÖ **–ú–∏–≥—Ä–∞—Ü–∏–∏ –≤ CMD** - –±–µ–∑ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ entrypoint —Å–∫—Ä–∏–ø—Ç–∞
- ‚úÖ **–ü—Ä–∏–Ω—Ü–∏–ø "—Ä–∞–±–æ—Ç–∞–µ—Ç > –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ"**

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤ (–ø–µ—Ä–≤—ã–π —Ä–∞–∑):** ~2-3 –º–∏–Ω—É—Ç—ã
- **–°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤ (—Å –∫—ç—à–µ–º):** ~30 —Å–µ–∫—É–Ω–¥
- **–ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:** ~5-10 —Å–µ–∫—É–Ω–¥
- **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π:** ~1-2 —Å–µ–∫—É–Ω–¥—ã
- **–û–±—â–µ–µ –≤—Ä–µ–º—è –¥–æ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏:** ~10-15 —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ —Å–±–æ—Ä–∫–∏

## –ö–æ–º–∞–Ω–¥—ã –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤
docker-compose build

# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker-compose ps

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
docker-compose logs -f

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker-compose down
```

## –¶–µ–ø–æ—á–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –º–∏–≥—Ä–∞—Ü–∏–π Alembic:

1. **798d96052738** (–∫–æ—Ä–Ω–µ–≤–∞—è) - —Å–æ–∑–¥–∞–µ—Ç `chat_sessions`, `chat_messages`
2. **0f7d5dc69d1f** - —Å–æ–∑–¥–∞–µ—Ç `users`
3. **optimize_001** - –¥–æ–±–∞–≤–ª—è–µ—Ç –∏–Ω–¥–µ–∫—Å—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### Sprint D1: Build & Publish

–°–ª–µ–¥—É—é—â–∏–π —Å–ø—Ä–∏–Ω—Ç –±—É–¥–µ—Ç –ø–æ—Å–≤—è—â–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏:

1. **GitHub Actions** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–æ–≤
2. **GHCR** - –ø—É–±–ª–∏–∫–∞—Ü–∏—è –æ–±—Ä–∞–∑–æ–≤ –≤ GitHub Container Registry
3. **CI/CD** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π –ø—Ä–∏ push –≤ main
4. **–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** - —Ç–µ–≥–∏ –æ–±—Ä–∞–∑–æ–≤ (latest, v1.0.0, etc.)

### –ë—É–¥—É—â–∏–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ (D2+)

- Multi-stage Dockerfiles –¥–ª—è –º–µ–Ω—å—à–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞ –æ–±—Ä–∞–∑–æ–≤
- Production build –¥–ª—è Frontend (Next.js static export)
- Health checks –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤
- Docker secrets –¥–ª—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- PostgreSQL –≤–º–µ—Å—Ç–æ SQLite –¥–ª—è production
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Prometheus + Grafana)

## –ú–µ—Ç—Ä–∏–∫–∏ —Å–ø—Ä–∏–Ω—Ç–∞

- **–ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ –∑–∞–¥–∞—á:** 10
- **–í—ã–ø–æ–ª–Ω–µ–Ω–æ:** 10
- **–ù–∞–π–¥–µ–Ω–æ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –ø—Ä–æ–±–ª–µ–º:** 3
- **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~3 —á–∞—Å–∞ (–≤–º–µ—Å—Ç–æ –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö 2-3 —á–∞—Å–æ–≤)
- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞:** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å –º–∏–≥—Ä–∞—Ü–∏—è–º–∏

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**Sprint D0 - Basic Docker Setup —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω!**

–í—Å–µ —Ç—Ä–∏ —Å–µ—Ä–≤–∏—Å–∞ (Bot, API, Frontend) —É—Å–ø–µ—à–Ω–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ `docker-compose up`. MVP –ø–æ–¥—Ö–æ–¥ –æ–±–µ—Å–ø–µ—á–∏–ª –±—ã—Å—Ç—Ä—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±–µ–∑ –∏–∑–ª–∏—à–Ω–µ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏. –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ development –æ–∫—Ä—É–∂–µ–Ω–∏–∏.

**–û—Å–Ω–æ–≤–Ω–æ–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–µ:** –ö–æ–º–∞–Ω–¥–∞ `docker-compose up` —Ç–µ–ø–µ—Ä—å –∑–∞–ø—É—Å–∫–∞–µ—Ç –≤—Å—é —Å–∏—Å—Ç–µ–º—É –∑–∞ ~10 —Å–µ–∫—É–Ω–¥.

---

**–í—ã–ø–æ–ª–Ω–∏–ª:** AI Assistant (Claude Sonnet 4.5)
**–î–∞—Ç–∞:** 18.10.2025
